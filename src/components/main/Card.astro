---
import { projects } from "@cv";
import Bagde from "../shared/Bagde.astro";
import { TAGS } from "../data/Tags.ts";
import BtnUrl from "../main/BtnUrl.astro";
import CodeGithub from "~/icons/CodeGithub.astro";
import Link from "~/icons/Link.astro";


const tagsArray = Object.entries(TAGS);
---


<ul class="px-4 flex justify-center items-center flex-col rounded-none">
  {
    projects.map((project: any) => (
      <li class="card w-full md:card-side  bg-base-100 mt-4 max-w-screen-lg mx-auto rounded-none">
        
        <figure class="w-full md:w-1/2">
          <img
            loading="lazy"
            src={project.img}
            alt={project.name}
            class="w-full h-60 object-cover rounded-md shadow-xs"
          />
        </figure>

        <div class="card-body w-full md:w-1/2">
          <h3 class="card-title text-xl">{project.name}</h3>

          <div class="flex flex-wrap gap-2">
            {
              project.technologies.map((skillName: string) => {
                const tagEntry = tagsArray.find(
                  ([_, tag]) => tag.name.toLowerCase() === skillName.toLowerCase()
                );

                if (tagEntry) {
                  const [_, tagData] = tagEntry;
                  return (
                    <Bagde key={tagData.name} class={tagData.class}>
                      <span class="flex flex-row gap-1 items-center">
                        <tagData.icon class="w-3 h-3" />
                        {tagData.name}
                      </span>
                    </Bagde>
                  );
                }

                return null;
              })
            }
          </div>

          <p class="text-sm font-light">{project.description}</p>

          <div class="card-actions mt-2">
            {project.github && (
              <BtnUrl href={project.github} class="btn btn-outline btn-sm">
                <CodeGithub class="w-5 h-5" />
                Code
              </BtnUrl>
            )}
            {project.demo && (
              <BtnUrl href={project.demo} class="btn btn-primary btn-sm">
                <Link class="w-5 h-5" />
                Preview
              </BtnUrl>
            )}
          </div>
        </div>
      </li>
    ))
  }
</ul>
